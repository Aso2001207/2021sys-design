```uml
@startuml
ユーザー -> webサーバー :カート追加
webサーバー -> DBサーバー :カート追加
DBサーバー -> DBサーバー :カート追加処理
DBサーバー -> webサーバー :カート内表示
webサーバー -> ユーザー :カート内表示

opt 商品購入
ユーザー -> webサーバー :商品購入ボタンクリック
webサーバー -> DBサーバー :カート内商品購入
DBサーバー -> DBサーバー :カート内商品精算
DBサーバー ->webサーバー :精算結果表示
webサーバー -> ユーザー :精算結果

alt 購入成功
webサーバー -> ユーザー :確認メール表示
else 購入失敗
webサーバー -> ユーザー :エラーメッセージ表示

end
end
@enduml
